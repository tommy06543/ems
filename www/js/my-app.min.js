var b={},c,e,g,h=$(window).height(),k={g:null,f:[],c:null,B:null};moment.tz.xa("Asia/Taipei");moment.locale("zh-tw");Framework7.prototype.J.H?$('<link rel="stylesheet" href="lib/framework7/css/framework7.material.min.css"><link rel="stylesheet" href="lib/framework7/css/framework7.material.colors.min.css">').w("head"):($(".pages.navbar-fixed").S("navbar-fixed").Y("navbar-through"),$(".page .navbar").w(".view"),$('<link rel="stylesheet" href="lib/framework7/css/framework7.ios.min.css"><link rel="stylesheet" href="lib/framework7/css/framework7.ios.colors.min.css">').w("head"));
var n=new Framework7({sa:Framework7.prototype.J.H,Ca:!1,Aa:"popup",za:"\u8fd4\u56de",P:function(a,d){g=!1;$(d.i).find("form input, form select, form textarea").ea(function(){g=!0});$(d.i).find(".back").S("back").click(function(){l()});$(d.i).find("a").K(function(){var a=this;$(this).R("router",$(this).R("href")).wa("href").click(function(){m.h.load({content:localStorage.getItem(a.h)})})})}}),m=n.Z(".view-main",{});
n.ta("index",function(){c||(c=new Vue({L:".panel",data:k,methods:{T:function(){k.g=b.g?b.g:null;k.f=b.f?b.f:null;k.c=b.c?b.c:null;k.B=b.c?_.find(b.c,{a:localStorage.a}):null}}}));new Vue({L:'[data-page="index"].page .page-content',data:{ra:null!=localStorage.getItem("loginToken")}});$(".form-to-data").j("click",function(){$.o({method:"POST",url:"http://ems-shh.us-east-1.elasticbeanstalk.com//plant_ajax/",headers:{"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",data:{G:localStorage.A,
b:btoa($('[data-page="index"].page [name="Account"]').W()+":"+$('[data-page="index"].page [name="Password"]').W())},l:3,I:function(){setTimeout(function(){n.U("\u767b\u5165\u4e2d..")})},C:function(a){"False"==a.b?e=n.m({title:"\u932f\u8aa4",message:"\u767b\u5165\u5931\u6557\u3002\u8acb\u6aa2\u67e5\u5e33\u865f\u5bc6\u78bc\u662f\u5426\u6b63\u78ba\u3002",v:3E3,u:!0}):"Over"==a.b?e=n.m({title:"\u932f\u8aa4",message:"\u767b\u5165\u5931\u6557\u3002<br/>\u60a8\u7684\u7db2\u8defIP\u4f4d\u7f6e\u5df2\u65bc30\u5206\u5167\u5617\u8a66\u8d85\u904e10\u6b21\u3002",
v:3E3,u:!0}):(localStorage.b=a.b,p(a))},complete:function(){n.M()}})})}).V();
n.P("index",function(){setTimeout(function(){$("body").ja({visibility:"initial"});setTimeout(function(){localStorage.b&&$.o({method:"POST",url:"http://ems-shh.us-east-1.elasticbeanstalk.com//plant_ajax/",headers:{"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",data:{G:localStorage.A},l:3,I:function(){setTimeout(function(){n.U("\u767b\u5165\u4e2d..")})},C:function(a){"False"==a.b?localStorage.removeItem("loginToken"):a.b==localStorage.b&&p(a)},complete:function(){n.M()}})},1E3)})}).V();
function p(a){b.g=a.g;b.f=a.f;_.forEach(b.f,function(a){a.D=parseInt(a.D)});b.c=a.c;localStorage.a=localStorage.a&&_.find(b.c,{a:localStorage.a})?localStorage.a:b.c[0].a;c.T();setTimeout(function(){q()})}
function q(){var a=void 0===a?!1:a;e=n.m({title:"\u8a0a\u606f",message:"\u8cc7\u6599\u540c\u6b65\u4e2d\uff0c\u8acb\u7a0d\u5f8c..",fa:!1,button:{}});$.o({method:"POST",url:"http://ems-shh.us-east-1.elasticbeanstalk.com//plant_ajax/ajaxData/",headers:{"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",data:{a:localStorage.a},l:3,C:function(d){n.ha(e);$.K(d,function(a,d){b[a.toString()]=d});_.forEach(b.qa,function(a){a.F=moment(a.X).add(10,"days").pa(moment())||1==k.B.F});a?m.h.back({url:"main.html",
force:!0}):m.h.load({url:"main.html",reload:!0})}})}function l(){g?n.N({title:"\u8a0a\u606f",text:"\u8cc7\u6599\u5c1a\u672a\u5132\u5b58\uff0c\u78ba\u5b9a\u96e2\u958b\uff1f",buttons:[{text:"\u53d6\u6d88"},{text:"\u78ba\u5b9a",O:function(){m.h.back()}}]}):m.h.back()}
$(document).j("deviceready",function(){var a=PushNotification.oa({android:{la:!0},browser:{ua:"http://push.api.phonegap.com/v1/push"},ios:{alert:!0,da:!0,Ba:!1},windows:{}});a.j("registration",function(a){localStorage.A=a.va});a.j("notification",function(a){alert("notification");alert(a.message)});a.j("error",function(a){alert("error");alert(a.message)});document.addEventListener("backbutton",function(){$("body").ma("with-panel-left-cover")?n.ia():0<$(".modal-in").length?n.ga():"main"==m.s.name?n.N({title:"\u8a0a\u606f",
text:"\u78ba\u5b9a\u7d50\u675f\u61c9\u7528\u7a0b\u5f0f\u55ce\uff1f",buttons:[{text:"\u53d6\u6d88"},{text:"\u78ba\u5b9a",O:function(){navigator.app.ka()}}]}):l()},!1)}).ca(function(){setTimeout(function(){n.ya()})}).ba(function(a,d,f){-1==f.data.indexOf("loginToken")&&(f.data+="&loginToken="+localStorage.b)}).aa(function(a,d,f){e=n.m({title:"\u932f\u8aa4",message:"\u9023\u7dda\u5931\u6557\uff0c\u91cd\u65b0\u5617\u8a66\u4e2d..("+f.l+")",v:5E3,u:!0});f.l--&&$.o(f)}).$(function(){setTimeout(function(){n.na()})});
$(window).resize(function(){0<$(":focus").length&&$(":focus").offset().top>h-$(window).height()&&$(m.s.i).find(".page-content").scrollTop($(m.s.i).find(".page-content").scrollTop()+h-$(window).height())});